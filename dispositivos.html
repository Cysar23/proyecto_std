<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>STD ADMIN</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="This is an example dashboard created using build-in elements and components."
    />
    <meta name="msapplication-tap-highlight" content="no" />

    <link href="./main.css" rel="stylesheet" />
    <link href="./style.css" rel="stylesheet" />
  </head>
  <body>
    <div
      class="app-container app-theme-white body-tabs-shadow fixed-sidebar fixed-header"
    >
      <div class="app-header header-shadow" id="nav"></div>

      <div class="app-main">
        <div class="app-sidebar sidebar-shadow" id="sidebar"></div>
        <div class="app-main__outer">
          <div class="app-main__inner">
            <div class="row">
              <div class="col-md-6 col-xl-12">
                <div class="card mb-3 widget-content bg-midnight-bloom">
                  <div class="widget-content-wrapper text-white">
                    <div class="widget-content-left">
                      <div class="widget-heading">Dispositivos</div>
                      <div class="widget-subheading">
                        Cantidad de dispositivos
                      </div>
                    </div>
                    <div class="widget-content-right">
                      <div
                        class="widget-numbers text-white"
                        id="cant_disp"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- FORMULARIO AGREGAR DISPOSITIVOS -->
            <button
              type="button"
              class="mb-2 mr-2 btn-transition btn btn-outline-info"
              data-toggle="modal"
              data-target="#modal_pacientes"
              onclick="pas()"
            >
              Agregar Dispositivo
            </button>

            <button
              type="button"
              class="mb-2 mr-2 btn-transition btn btn-outline-info"
              data-toggle="modal"
              data-target="#modal_pastillas"
              onclick="pastillas()"
            >
              Pastillas
            </button>

            <!-- FIN FOMULARIO AGREGAR DISPOSITIVOS -->
            <!-- <button type="button" class="mb-2 mr-2 btn-transition btn btn-outline-info" data-toggle="modal"  data-target="#modal_pastillas">Pastillas</button>  -->

            <div class="row" id="card_Nodispositivo"></div>
            <div class="row" id="card_dispositivo">
              <!-- Aqui va otra tarjeta de ir -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <!-- MODAL AGREGAR-->
  <div
    class="modal fade overflow-auto"
    id="modal_pacientes"
    tabindex="-1"
    role="dialog"
    aria-labelledby="ModalLabel"
    style="display: none"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-xl" role="">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalLabel">Agregar Nuevo Dispositivo</h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <form class="needs-validation" novalidate="" id="form_dispositivo">
            <div class="modal-header">
              <div class="col-md-6 mb-3">
                <label for="id_paciente">Paciente</label>
                <select
                  name="custom-select-dip"
                  id="id_paciente"
                  class="form-control"
                  required=""
                ></select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="mac_dispositivo"
                  >MAC del dispositivo <font color="red">*</font></label
                >
                <input
                  type="text"
                  class="form-control"
                  id="mac_dispositivo"
                  placeholder="001ab23c456d"
                  required=""
                  minlength="12"
                  maxlength="12"
                />
              </div>
            </div>

            <!-- CONTENEDOR 1 -->
            <div class="form-row">
              <hr style="width: 100%; text-align: left; margin-left: 0" />
              <div
                class="col-md-12 mb-3 text-primary"
                style="text-align: center"
              >
                <h5>CONTENEDOR #1</h5>
                <hr />
              </div>

              <div class="col-md-6 mb-3">
                <label for="id_pastilla_1"
                  >Pastillas <font color="red">*</font></label
                >
                <div class="input-group">
                  <select
                    name="custom-select-dip"
                    id="id_pastilla_1"
                    class="form-control"
                    required=""
                  >
                    <option value="" disabled selected>Seleccione...</option>
                  </select>
                  <div class="input-group-append">
                    <button
                      class="btn btn-outline-secondary"
                      data-toggle="modal"
                      data-target="#agregar_pastillas"
                      type="button"
                    >
                      Agregar
                    </button>
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="fecha_v_1"
                  >Fecha de vencimiento <font color="red">*</font></label
                >
                <input
                  type="date"
                  class="form-control"
                  id="fecha_v_1"
                  required=""
                />
              </div>

              <!-- Script para que la fecha de vencimiento siempre sea mayor a hoy -->
              <script>
                // Obtén la fecha actual
                var fechaActual = new Date();

                // Convierte la fecha a formato yyyy-mm-dd
                var fechaLimiteInferior = fechaActual
                  .toISOString()
                  .slice(0, 10);

                // Establece la fecha límite inferior como el atributo 'min'
                document.getElementById("fecha_v_1").min = fechaLimiteInferior;
              </script>

              <div class="col-md-4 mb-3">
                <label for="cant_caps_toma_1"
                  >Cantidad de cápsulas por toma <font color="red">*</font></label
                >
                <input
                  type="number"
                  class="form-control"
                  required=""
                  placeholder="Dias"
                  id="cant_caps_toma_1"
                />
              </div>

              <div class="col-md-4 mb-3">
                <label for="frecuencia_de_pastillas_1"
                  >Toma de pastillas cada X horas
                  <font color="red">*</font></label
                >
                <select
                  name="custom-select-dip"
                  id="frecuencia_de_pastillas_1"
                  class="form-control"
                  required=""
                >
                  <option value="" disabled selected>Seleccione...</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>6</option>
                  <option>8</option>
                  <option>12</option>
                  <option>24</option>
                </select>
              </div>

              <div class="col-md-4 mb-3">
                <label for="t_tratamiento_1"
                  >Tiempo del tratamiento <font color="red">*</font></label
                >
                <input
                  type="number"
                  class="form-control"
                  required=""
                  placeholder="Dias"
                  id="t_tratamiento_1"
                />
              </div>

              <div class="col-md-12" style="text-align: center">
                <h5>¿A partir de cuando empezará a tomar las pastillas?</h5>
              </div>

              <div class="col-md-6 mb-3">
                <label for="dia_inicio_pastilla"
                  >Día <font color="red">*</font></label
                >
                <input
                  type="date"
                  class="form-control"
                  id="dia_inicio_pastilla"
                  required=""
                />
              </div>

              <!-- Script para que la fecha sea siempre sea mayor a hoy -->
              <script>
                // Obtén la fecha actual
                var fechaActual = new Date();

                // Convierte la fecha a formato yyyy-mm-dd
                var fechaLimiteInferior = fechaActual
                  .toISOString()
                  .slice(0, 10);

                // Establece la fecha límite inferior como el atributo 'min'
                document.getElementById("dia_inicio_pastilla").min =
                  fechaLimiteInferior;
              </script>

              <div class="col-md-6 mb-3">
                <label for="hora_inicio_pastilla"
                  >Hora <font color="red">*</font></label
                >
                <input
                  type="time"
                  class="form-control"
                  id="hora_inicio_pastilla"
                  required=""
                />
              </div>
            </div>

            <!-- CONTENEDOR 2 -->
            <div class="modal-header"></div>
            <div class="form-row">
              <hr style="width: 100%; text-align: left; margin-left: 0" />
              <div
                class="col-md-12 mb-3 text-primary"
                style="text-align: center"
              >
                <h5>CONTENEDOR #2</h5>
                <div class="custom-checkbox custom-control">
                  <input
                    type="checkbox"
                    id="checkbox_contenedor_2"
                    class="custom-control-input"
                  />
                  <label
                    class="custom-control-label"
                    for="checkbox_contenedor_2"
                    >Usar este contenedor</label
                  >
                </div>
                <hr />
              </div>

              <div class="col-md-6 mb-3">
                <label for="id_pastilla_2"
                  >Pastilla <font color="red">*</font></label
                >
                <select
                  name="custom-select-dip"
                  id="id_pastilla_2"
                  class="form-control"
                  disabled
                  required
                >
                  <option value="" disabled selected>Seleccione...</option>
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label for="fecha_v_2"
                  >Fecha de vencimiento <font color="red">*</font></label
                >
                <input
                  type="date"
                  class="form-control"
                  id="fecha_v_2"
                  required=""
                  disabled
                  required
                />
              </div>

              <div class="col-md-6 mb-3">
                <label for="frecuencia_de_pastillas_2"
                  >Toma de pastillas por HORAS <font color="red">*</font></label
                >
                <select
                  name="custom-select-dip"
                  id="frecuencia_de_pastillas_2"
                  class="form-control"
                  disabled
                  required
                >
                  <option value="" disabled selected>Seleccione...</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>6</option>
                  <option>8</option>
                  <option>12</option>
                  <option>24</option>
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label for="t_tratamiento_2"
                  >Tiempo del tratamiento <font color="red">*</font></label
                >
                <input
                  type="number"
                  class="form-control"
                  placeholder="Dias"
                  id="t_tratamiento_2"
                  disabled
                  required
                />
              </div>

              <div class="col-md-12" style="text-align: center">
                <h5>¿A partir de cuando empezará a tomar las pastillas?</h5>
              </div>

              <div class="col-md-6 mb-3">
                <label for="dia_inicio_pastilla_2"
                  >Día <font color="red">*</font></label
                >
                <input
                  type="date"
                  class="form-control"
                  id="dia_inicio_pastilla_2"
                  disabled
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="hora_inicio_pastilla_2"
                  >Hora <font color="red">*</font></label
                >
                <input
                  type="time"
                  class="form-control"
                  id="hora_inicio_pastilla_2"
                  disabled
                  required
                />
              </div>
            </div>

            <!-- CONTENEDOR 3 -->
            <div class="modal-header"></div>
            <div class="form-row">
              <hr style="width: 100%; text-align: left; margin-left: 0" />
              <div
                class="col-md-12 mb-3 text-primary"
                style="text-align: center"
              >
                <h5>CONTENEDOR #3</h5>
                <div class="custom-checkbox custom-control">
                  <input
                    type="checkbox"
                    id="checkbox_contenedor_3"
                    class="custom-control-input"
                  />
                  <label
                    class="custom-control-label"
                    for="checkbox_contenedor_3"
                    >Usar este contenedor</label
                  >
                </div>
                <hr />
              </div>

              <div class="col-md-6 mb-3">
                <label for="id_pastilla_3"
                  >Pastilla <font color="red">*</font></label
                >
                <select
                  name="custom-select-dip"
                  id="id_pastilla_3"
                  class="form-control"
                  disabled
                  required
                >
                  <option value="" disabled selected>Seleccione...</option>
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label for="fecha_v_3"
                  >Fecha de vencimiento <font color="red">*</font></label
                >
                <input
                  type="date"
                  class="form-control"
                  id="fecha_v_3"
                  required=""
                  disabled
                  required
                />
              </div>

              <div class="col-md-6 mb-3">
                <label for="frecuencia_de_pastillas_3"
                  >Toma de pastillas por HORAS <font color="red">*</font></label
                >
                <select
                  name="custom-select-dip"
                  id="frecuencia_de_pastillas_3"
                  class="form-control"
                  disabled
                  required
                >
                  <option value="" disabled selected>Seleccione...</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>6</option>
                  <option>8</option>
                  <option>12</option>
                  <option>24</option>
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label for="t_tratamiento_3"
                  >Tiempo del tratamiento <font color="red">*</font></label
                >
                <input
                  type="number"
                  class="form-control"
                  placeholder="Dias"
                  id="t_tratamiento_3"
                  disabled
                  required
                />
              </div>

              <div class="col-md-12" style="text-align: center">
                <h5>¿A partir de cuando empezará a tomar las pastillas?</h5>
              </div>

              <div class="col-md-6 mb-3">
                <label for="dia_inicio_pastilla_3"
                  >Día <font color="red">*</font></label
                >
                <input
                  type="date"
                  class="form-control"
                  id="dia_inicio_pastilla_3"
                  disabled
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="hora_inicio_pastilla_3"
                  >Hora <font color="red">*</font></label
                >
                <input
                  type="time"
                  class="form-control"
                  id="hora_inicio_pastilla_3"
                  disabled
                  required
                />
              </div>
            </div>

            <div id="div_eliminar">
              <button class="btn btn-primary" type="submit" id="btn_agregar">
                Agregar
              </button>
              <button
                class="close btn btn-danger btn_eliminar-paciente"
                type="button"
                id="btn_eliminar"
              >
                Eliminar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- MODASL MOSTRAR PASTILLAS -->
  <!-- MODAL -->
  <div
    class="modal fade overflow-auto"
    id="modal_pastillas"
    tabindex="-1"
    role="dialog"
    aria-labelledby="ModalLabel"
    style="display: none"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-xl" role="">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalLabel">Pastillas</h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="input-group mb-3">
            <input
              type="text"
              class="form-control"
              placeholder="Buscar pastillas"
              id="search_pastillas"
              oninput="searchPastillas()"
            />
            <button
              class="btn btn-outline-secondary"
              data-toggle="modal"
              data-target="#agregar_pastillas"
              type="button"
            >
              Agregar
            </button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <th>Miligramos</th>
                    <th>Descripción</th>
                  </tr>
                </thead>
                <tbody
                  class="table_pastillas"
                  8
                  mn
                  id="table_body_pastillas"
                ></tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Cerrar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL AGREGAR PASTILLAS -->

  <div
    class="modal fade"
    id="agregar_pastillas"
    tabindex="-1"
    role="dialog"
    aria-labelledby="agregar_pastillasModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="agregar_pastillasModalLabel">
            Agregar Pastilla
          </h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form
          class="needs-validation"
          novalidate=""
          id="form_agregar_pastillas"
        >
          <div class="modal-body form-row">
            <div class="col-md-6 mb-3">
              <label for="">Nombre de la pastilla</label>
              <input
                type="text"
                class="form-control"
                id="nombre_pastilla"
                required=""
              />
            </div>
            <div class="col-md-6 mb-3">
              <label for="">Miligramos (mg)</label>
              <input
                type="number"
                class="form-control"
                id="mg_pastillas"
                required=""
              />
            </div>
            <div class="col-md-12 mb-3">
              <label for="">Descripción</label>
              <textarea
                class="form-control"
                name=""
                id="nota_pastillas"
                rows="2"
              ></textarea>
            </div>
          </div>
        </form>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary"
            onclick="agregar_pastillas()"
          >
            Agregar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- FIN MODAL AGREGAR PASTILLAS -->

  <script>
    function searchPastillas() {
      var input, filter, table, tr, td, i, j, txtValue;
      input = document.getElementById("search_pastillas");
      filter = input.value.toLowerCase();
      table = document.querySelector(".table_pastillas");
      tr = table.getElementsByTagName("tr");

      for (i = 0; i < tr.length; i++) {
        var displayRow = false;
        td = tr[i].getElementsByTagName("td");
        for (j = 0; j < td.length; j++) {
          if (td[j]) {
            txtValue = td[j].textContent || td[j].innerText;
            if (txtValue.toLowerCase().indexOf(filter) > -1) {
              displayRow = true;
              break;
            }
          }
        }
        tr[i].style.display = displayRow ? "" : "none";
      }
    }
  </script>

  <!--  -->
  <div
    class="modal fade bd-example-modal-lg"
    id="modal_dispositivo_detalle"
    tabindex="-1"
    role="dialog"
    aria-labelledby="myLargeModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalLabel">Detalles</h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div class="main-card mb-3 card">
                <h5 id="paciente_STD" class="text-center"></h5>
                <div class="table-responsive">
                  <table
                    class="align-middle mb-0 table table-borderless table-striped table-hover"
                  >
                    <thead>
                      <tr>
                        <th class="text-center">Contenedores</th>
                        <th class="text-center">Pastillas</th>
                        <th class="text-center">Toma cada</th>
                        <th class="text-center">Estado</th>
                        <th class="text-center">Fecha esperada</th>
                        <th class="text-center">Fecha Tomada</th>
                        <th class="text-center">Historial</th>
                      </tr>
                    </thead>
                    <tbody id="mostrar_detalle_dispositivo"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CONEXION A FIREBASE -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->

  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>

  <script src="./config.js"></script>
  <script type="text/javascript" src="./main_controler.js"></script>
  <script type="text/javascript" src="./assets/scripts/main.js"></script>
  <script src="./assets/scripts/plantillas/nav_plantilla.js"></script>
  <script src="./assets/scripts/plantillas/sidebar.js"></script>
  <script
    type="text/javascript"
    src="./assets/scripts/dispositivos.js"
  ></script>
</html>
